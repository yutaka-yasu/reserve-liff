<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>LINEで予約</title>
</head>
<body>
  <h1>LINEで予約</h1>
  <form id="reserveForm" method="POST" action="/api/reserve">
    <input type="hidden" name="lineUserId" />
    <input type="hidden" name="lineDisplayName" />
    <label>ご希望日時 <input type="datetime-local" name="startAt" required></label><br>
    <label>メニュー <input type="text" name="menu" required></label><br>
    <label>お名前 <input type="text" name="name" required></label><br>
    <label>電話番号 <input type="tel" name="tel" required></label><br>
    <button type="submit">予約する</button>
  </form>

  <script src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>
  <script>
    (async () => {
      const LIFF_ID = "YOUR_LIFF_ID"; // 後で環境変数の値を埋め込んでもOK
      try {
        await liff.init({ liffId: LIFF_ID });
        if (!liff.isLoggedIn()) liff.login();
        const profile = await liff.getProfile();
        document.querySelector('[name="lineUserId"]').value = profile.userId || "";
        document.querySelector('[name="lineDisplayName"]').value = profile.displayName || "";
      } catch (e) { console.error(e); }
    })();
  </script>
</body>
</html>
